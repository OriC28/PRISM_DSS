-- Active: 1745066946470@@127.0.0.1@3306@dss
{% extends "base.html" %}

{% block title %} Registrar Proyecto - PRISM DSS {% endblock %}

    {% block extra_css %}
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="/static/css/registrar.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    {% endblock %}
</head>

{% block content %}
    

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <div class="content-header">
                <h2>{% block module %} Registrar Nuevo Proyecto {% endblock %}</h2>
                <div class="breadcrumb">
                    <span>Inicio</span> / <span class="active">{% block current_page %} Registrar Proyecto {% endblock %}</span>
                </div>
            </div>

            <!-- Formulario de Registro -->
            <div class="form-container">
                <form id="projectForm" action="{% url 'register'%}" method="POST">
                    {% csrf_token %}
                    
                    
                    <!-- Sección Información Básica -->
                    <div class="form-section">
                        <h3><i class="fas fa-info-circle"></i> Información Básica</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="projectName">{{project_form.project_name.label}}</label>
                                {{project_form.project_name}}
                            </div>
                            
                            <div class="form-group">
                                <label for="projectType">{{project_form.project_type.label}}</label>
                                {{project_form.project_type}}
                            </div>
                            
                            <div class="form-group">
                                <label for="projectStatus">{{project_form.project_status.label}}</label>
                                {{project_form.project_status}}
                            </div>
                            
                            <div class="form-group">
                                <label for="projectBudget">{{project_form.project_budget.label}}</label>
                                <div class="input-group">
                                    <!-- esta es el input de la moneda -->
                                    {{project_form.project_budget}}
                                    <!-- esta es el select de las unidades de la moneda -->
                                    {{project_form.project_budget_unit}}
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="projectDuration">{{project_form.project_duration.label}}</label>
                                <div class="input-group">
                                    {{project_form.project_duration}}
                                    {{project_form.project_duration_unit}}
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="projectLocation">{{project_form.project_location.label}}</label>
                                {{project_form.project_location}}
                            </div>
                            
                            <div class="form-group">
                                <label for="staffCount">{{project_form.staffCount.label}}</label>
                                {{project_form.staffCount}}
                            </div>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="projectDescription">{{project_form.project_description.label}}</label>
                            {{project_form.project_description}}
                        </div>
                    </div>
                    
                                    <!-- Sección de Riesgos -->
                    <div class="form-section">
                        <h3><i class="fas fa-exclamation-triangle"></i> Identificación de Riesgos</h3>
                        <div class="risk-container" id="risksContainer">

                            {{ project_risk.management_form }}
                            {% for form in project_risk %}
                                <div class="risk-item" data-risk-id="{{ forloop.counter }}">
                                    <div class="risk-header">
                                        <h4>Riesgo #{{ forloop.counter }}</h4>
                                        <button type="button" class="btn btn-remove-risk">
                                            <i class="fas fa-times"></i> Eliminar
                                        </button>
                                    </div>
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label for="{{ form.riskDescription.id_for_label }}">{{ form.riskDescription.label }}</label>
                                            {{ form.riskDescription }}
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="{{ form.riskMitigation.id_for_label }}">{{ form.riskMitigation.label }}</label>
                                            {{ form.riskMitigation }}
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="{{ form.riskProbability.id_for_label }}">{{ form.riskProbability.label }}</label>
                                            {{ form.riskProbability }}
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="{{ form.riskImpact.id_for_label }}">{{ form.riskImpact.label }}</label>
                                            {{ form.riskImpact }}
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="{{ form.riskStatus.id_for_label }}">{{ form.riskStatus.label }}</label>
                                            {{ form.riskStatus }}
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="{{ form.riskCategory.id_for_label }}">{{ form.riskCategory.label }}</label>
                                            {{ form.riskCategory }}
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                        <button type="button" id="addRiskButton" class="btn btn-add-risk">
                            <i class="fas fa-plus"></i> Agregar Riesgo
                        </button>
                    </div>
                    
                    <!-- Botones del Formulario -->
                    <div class="form-actions">
                        <button type="button" class="btn btn-cancel" id="cancelBtn">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                        <button type="submit" class="btn btn-submit">
                            <i class="fas fa-save"></i> Guardar Proyecto
                        </button>
                    </div>
                </form>
            </div>
        </main>
    </div>
{% endblock %}

{% block extra_js %}
    {% load static %}
    
        <!-- Contenido de la página -->
        {% comment %} <script src="{% static 'js/scripts.js' %}"></script> {% endcomment %}
    
    <script src="{% static 'js/registrar.js' %}"></script>
{% endblock %}
</html>