{% extends "base.html" %}

{% block title %}Analizar Proyecto (IA){% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="/static/css/analizar.css">
{% endblock %}

{% block content %}
<!-- Main Content -->
<main class="main-content" id="mainContent">
    <!--Información de la pestaña actual-->
    <div class="content-header">
        <h2>{% block module %}Análisis de Proyecto con IA{% endblock %}</h2>
        <div class="breadcrumb">
            <span>Inicio</span> / <span class="active">
                {% block current_page %}Analizar Proyecto (IA){% endblock %}
            </span>
        </div>
    </div>

    <!-- Formulario y Resultados -->
    <div class="analysis-container">
        <!-- Formulario de Análisis -->
        <div class="form-section">
            <h3><i class="fas fa-edit"></i> Datos del Proyecto a Analizar</h3>
            <form id="analysisForm", method="POST">
                {% csrf_token %}
                <div class="form-grid">
                    <div class="form-group">
                        <label for="projectName">{{ form.project_name.label}}</label>
                        {{form.project_name}}
                    </div>

                    <div class="form-group">
                        <label for="projectType">{{form.project_type.label}}</label>
                        {{form.project_type}}
                    </div>

                    <div class="form-group">
                        <label for="projectUse">{{form.project_function.label}}</label>
                        {{form.project_function}}
                    </div>

                    <div class="form-group">
                        <label for="projectBudget">{{form.estimate.label}}</label>
                        {{form.estimate}}
                    </div>

                    <div class="form-group">
                        <label for="projectTime">{{form.time.label}}</label>
                        {{form.time}}
                    </div>
                </div>

                <div class="form-group full-width">
                    <label for="projectDescription">{{form.project_description.label}}</label>
                    {{form.project_description}}
                    <p class="hint">Describe el proyecto con el mayor detalle posible para un análisis más preciso.</p>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-cancel" id="cancelBtn">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                    <button type="submit" class="btn btn-analyze">
                        <i class="fas fa-brain"></i> Analizar con IA
                    </button>
                </div>
            </form>
        </div>

        <!-- Resultados del Análisis -->
        <div class="results-section" id="resultsSection" style="display: none;">
            <div class="results-header">
                <h3><i class="fas fa-chart-line"></i> Resultados del Análisis</h3>
                <button class="btn btn-export" id="exportBtn">
                    <i class="fas fa-file-export"></i> Exportar Informe
                </button>
            </div>

            <div class="results-content" id="resultsContent"></div>
                
                <!-- Los resultados se cargarán aquí dinámicamente -->
            </div>
        </div>
    </div>
</main>
{% endblock %}

{% block extra_js %}
    {{ data|json_script:"iaResponseData" }} <!--Permite utilizar los datos en analizar.js-->
    <script src="/static/js/analizar.js"></script>
{% endblock %}